@import 'nib'

rect(width, height)
  width width
  height height
  margin-left (-0.5 * width)
  margin-top (-0.5 * height)

rect-container-color(a, b = false, c = false)
  .rect:nth-child(1)
    background-color a

  if b
    .rect:nth-child(2)
      background-color b

  if c
    .rect:nth-child(3)
      background-color c

rect-container-delay(delay = 0, step = 200ms)
  .rect:nth-child(1)
    animation-delay delay

  .rect:nth-child(2)
    animation-delay (delay + step)

  .rect:nth-child(3)
    animation-delay (delay + step * 2)


@keyframes expand
  0%
    transform scale(0)

  100%
    transform scale(1)


html
body
  height 100%

body
  margin 0
  background-color #eee

  display flex
  align-items center
  justify-content center

.rect
  // http://easings.net/#easeOutCirc
  animation expand 1s cubic-bezier(0.075, 0.82, 0.165, 1) forwards
  transform scale(0)

$red = #e64
$green = #dd6
$grey = #665
$blue = #9bb
$orange = #ea4

.palette
  size = 64px
  margin-left (-0.5 * size)
  margin-right (size / 5)

  .rect-container
    width size
    height size
    margin-left @width
    margin-top @height

    .rect:nth-child(1)
      rect(64px, 64px)

    .rect:nth-child(2)
      rect(36px, 36px)

    .rect:nth-child(3)
      rect(18px, 18px)

  .rect
    position absolute
    border-radius 25%

  .row
    max-width 8 * size
    margin-top (-0.75 * size)

    display flex
    align-items center
    justify-content space-around

  step = 50ms

  .row:nth-child(1)
    .rect-container:nth-child(1)
      rect-container-color($red)
      rect-container-delay(step * 0)

    .rect-container:nth-child(2)
      rect-container-color($green)
      rect-container-delay(step * 1)

    .rect-container:nth-child(3)
      rect-container-color($grey)
      rect-container-delay(step * 2)

    .rect-container:nth-child(4)
      rect-container-color($blue)
      rect-container-delay(step * 3)

    .rect-container:nth-child(5)
      rect-container-color($orange)
      rect-container-delay(step * 4)

  .row:nth-child(2)
    .rect-container:nth-child(1)
      rect-container-color($red, $green)
      rect-container-delay(step * 5)

    .rect-container:nth-child(2)
      rect-container-color($green, $red)
      rect-container-delay(step * 6)

    .rect-container:nth-child(3)
      rect-container-color($grey, $green)
      rect-container-delay(step * 7)

    .rect-container:nth-child(4)
      rect-container-color($blue, $grey)
      rect-container-delay(step * 8)

    .rect-container:nth-child(5)
      rect-container-color($orange, $green)
      rect-container-delay(step * 9)

  .row:nth-child(3)
    .rect-container:nth-child(1)
      rect-container-color($red, $green, $grey)
      rect-container-delay(step * 10)

    .rect-container:nth-child(2)
      rect-container-color($green, $red, $orange)
      rect-container-delay(step * 11)

    .rect-container:nth-child(3)
      rect-container-color($grey, $green, $red)
      rect-container-delay(step * 12)

    .rect-container:nth-child(4)
      rect-container-color($blue, $green, $red)
      rect-container-delay(step * 13)

    .rect-container:nth-child(5)
      rect-container-color($orange, $red, $green)
      rect-container-delay(step * 14)

  .row:nth-child(4)
    .rect-container:nth-child(1)
      rect-container-color($red, $orange)
      rect-container-delay(step * 15)

    .rect-container:nth-child(2)
      rect-container-color($green, $grey)
      rect-container-delay(step * 16)

    .rect-container:nth-child(3)
      rect-container-color($grey, $red)
      rect-container-delay(step * 17)

    .rect-container:nth-child(4)
      rect-container-color($blue, $green)
      rect-container-delay(step * 18)

    .rect-container:nth-child(5)
      rect-container-color($orange, $red)
      rect-container-delay(step * 19)

  .row:nth-child(5)
    .rect-container:nth-child(1)
      rect-container-color($red, $green, $orange)
      rect-container-delay(step * 20)

    .rect-container:nth-child(2)
      rect-container-color($green, $red, $grey)
      rect-container-delay(step * 21)

    .rect-container:nth-child(3)
      rect-container-color($grey, $red, $orange)
      rect-container-delay(step * 22)

    .rect-container:nth-child(4)
      rect-container-color($blue, $grey, $green)
      rect-container-delay(step * 23)

    .rect-container:nth-child(5)
      rect-container-color($orange, $green, $red)
      rect-container-delay(step * 24)
